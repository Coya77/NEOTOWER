{% extends "base.html" %}
{% block title %}Asignar Técnico{% endblock %}

{% block content %}
<div class="container mt-4">
  <h3 class="text-primary mb-4">
    <i class="bi bi-person-gear"></i> Asignar Técnico al Ticket #{{ id_incidente }}
  </h3>

  <div class="card shadow-sm">
    <div class="card-body">
      {% if tecnicos %}
      <form action="{{ url_for('asignar_tecnico', id_incidente=id_incidente) }}" method="POST">
        <div class="mb-3">
          <label class="form-label fw-bold">Seleccionar Técnico</label>
          <select name="id_tecnico" class="form-select" required>
            <option value="">-- Selecciona un técnico --</option>
            {% for t in tecnicos %}
              <option value="{{ t.id_personal }}">
                {{ t.nombre }} ({{ t.cargo }})
              </option>
            {% endfor %}
          </select>
        </div>

        <div class="d-flex justify-content-between">
          <a href="{{ url_for('gestion_incidentes') }}" class="btn btn-secondary">
            <i class="bi bi-arrow-left"></i> Volver
          </a>
          <button type="submit" class="btn btn-primary">
            <i class="bi bi-check-circle"></i> Asignar Técnico
          </button>
        </div>
      </form>
      {% else %}
      <div class="alert alert-warning text-center">
        <i class="bi bi-exclamation-triangle"></i> No hay técnicos registrados en el sistema.
      </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
